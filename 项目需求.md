# 项目名称： BibAnalysis

## 项目概述：
BibAnalysis 是一个用于文献综述前处理和后处理的项目，主要功能包括从 Scopus 查询文献、将文献添加到 Zotero、定期更新引用数、读取 JSON 文件中的文献信息、调用 OpenAI API 进行总结、记录更新日志等。项目的核心是 Article 类，该类管理文献信息，并提供多种功能接口。

## 主要功能：

### 文献查询：

利用 pybliometrics 包从 Scopus 查询特定领域的文献。
将搜集到的每篇文献信息保存在一个 Article 类中。
Zotero 集成：

利用 pyzotero 与 Zotero 联通，将文献记录自动添加到 Zotero。
通过 Zotero 管理文献的附件 PDF。

### 引用数更新：

定期自动在 Article 类和 Zotero 中以笔记的形式更新引用数字段。
每个 Article 在本地以 tinydb 数据库形式存储。

### Article 类设计：

修改魔术方法，以点索引的形式打印出所有相关信息。
能够按照规则比较是否相等和大小，以实现去重和按照某些字段排序。

### 数据更新：

从 JSON 文件中读取文献信息。
从 Zotero、Scopus API 中的信息比较更新某一字段或自动识别更新新字段。

### LLM 总结：

利用 OpenAI API，接收总结任务 prompt 和 Article 信息（包括基本信息和 PDF 文件）。
基于给定模板给出回答和总结，结果以一定形式存储在 Article 类中。
存储前引入特定方法，对 LLM 输出字段进行规则检查，以避免模型输出结果不合法。

### 日志记录：

每次更新操作记录日志，并保存上一步回退或仅部分字段覆盖的功能。
特殊字段如引用数需要记录每个日期的引用数，并可以每月自动更新。
地址字段精确到 county, area, country，调用 OpenStreetMap API 实现地址对应经纬度的获取和统一化。

### 文献关系管理：

记录并处理从 Scopus 中获取的引文信息，对每个文章之间的联系予以记录并便于提取和可视化。

### 作者信息管理：

包含多个作者的子类实例，每个作者关联了作者编号、地址信息、h-index 等。
某些属性随时间变化，需要更新。

### 期刊信息管理：

每篇 Article 包括对应的期刊，期刊相关信息。
多篇 Article 可能统属于同一个期刊的情况需要标记。

### 查询功能：

提供便捷的查询功能，当指定某一个或几个字段时，与之相关的多个层级的所有信息依次检索。

### 可视化与导出：

预留可视化和导出的接口。

